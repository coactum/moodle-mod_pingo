{"version":3,"file":"view.min.js","sources":["../src/view.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * JavaScript for the main page of the plugin.\n *\n * @module   mod_pingo/view\n * @copyright  2023 coactum GmbH\n * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport $ from 'jquery';\n\nexport const init = () => {\n    $(\"#id_tag\").on('change', function() {\n        $('input[name=reload]').val(1);\n        this.form.submit();\n    });\n\n    $('input[name=\"activatesession\"]').change(function() {\n        if (this.checked) {\n            window.location.search += '&activatesession=' + this.id;\n        } else {\n            window.location.search += '&activatesession=' + 0;\n        }\n    });\n\n    if ($(\"#endtime\").text()) {\n        // Set the date we're counting down to.\n        var countDownDate = new Date($(\"#endtime\").text()).getTime();\n\n        // Update the count down every 1 second.\n        var x = setInterval(function() {\n\n            // Get today's date and time.\n            var now = new Date().getTime();\n\n            // Find the distance between now and the count down date.\n            var distance = countDownDate - now;\n\n            // Time calculations for minutes and seconds.\n            var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));\n            var seconds = Math.floor((distance % (1000 * 60)) / 1000);\n\n            if (seconds < 10) {\n                seconds = '0' + seconds;\n            }\n\n            // Display the result in the element with id=\"endtime\".\n            $(\"#endtime\").html(minutes + \":\" + seconds);\n\n            // If the countdown is finished reload.\n            if (distance < 0) {\n                clearInterval(x);\n                $(\"#endtime\").html('-');\n\n                location.reload();\n            }\n        }, 1000);\n\n    }\n};"],"names":["obj","_jquery","__esModule","default","_exports","init","$","on","val","this","form","submit","change","checked","window","location","search","id","text","countDownDate","Date","getTime","x","setInterval","now","distance","minutes","Math","floor","seconds","html","clearInterval","reload"],"mappings":"yEAuBuB,IAAAA;;;;;;;kFAAvBC,SAAuBD,IAAvBC,UAAuBD,IAAAE,WAAAF,IAAAG,CAAAA,QAAAH,KAkDrBI,SAAAC,KAhDkBA,KAchB,IAbA,EAAAC,QAAAA,SAAE,WAAWC,GAAG,UAAU,YACtB,EAAAD,QAAAA,SAAE,sBAAsBE,IAAI,GAC5BC,KAAKC,KAAKC,QACd,KAEA,EAAAL,iBAAE,iCAAiCM,QAAO,WAClCH,KAAKI,QACLC,OAAOC,SAASC,QAAU,oBAAsBP,KAAKQ,GAErDH,OAAOC,SAASC,QAAU,oBAElC,KAEI,EAAAV,iBAAE,YAAYY,OAEd,IAAIC,cAAgB,IAAIC,MAAK,EAAAd,QAACH,SAAC,YAAYe,QAAQG,UAG/CC,EAAIC,aAAY,WAGhB,IAAIC,KAAM,IAAIJ,MAAOC,UAGjBI,SAAWN,cAAgBK,IAG3BE,QAAUC,KAAKC,MAAOH,SAAY,KAAe,KACjDI,QAAUF,KAAKC,MAAOH,SAAY,IAAc,KAEhDI,QAAU,KACVA,QAAU,IAAMA,UAIpB,EAAAvB,QAACH,SAAC,YAAY2B,KAAKJ,QAAU,IAAMG,SAG/BJ,SAAW,IACXM,cAAcT,IACd,EAAAhB,QAAAA,SAAE,YAAYwB,KAAK,KAEnBf,SAASiB,SAEhB,GAAE,IAEP,CACF"}